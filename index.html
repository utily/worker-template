<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Durable object websocket</title>
  </head>
  <body>
	<h1>Durable object websocket</h1>
	<script>
		console.log("loading...")
		const connection = new WebSocket("ws://localhost:8787/upgrade")
		connection.addEventListener("open", () => connection.send(JSON.stringify({message: "hello world"})))
		connection.addEventListener("message", (message) => console.log(JSON.parse(message.data)))

		console.log("loaded")
	</script>
  </body>
</html>
